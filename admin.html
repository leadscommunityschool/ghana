<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Dashboard - Leads Community School</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="css/style.css">
<style>
body{background:#f4f6f9;font-family:'Segoe UI',Arial,sans-serif;margin:0;padding:0;}
header{background:#0b5e2a;color:white;padding:20px;text-align:center;}
.container{padding:40px;}
h2{color:#0b5e2a;margin-bottom:20px;}
.card{background:white;padding:20px;margin-bottom:20px;border-radius:15px;box-shadow:0 5px 15px rgba(0,0,0,.2);}
input, textarea, button{width:100%;padding:10px;margin:10px 0;border-radius:10px;border:1px solid #ccc;}
button{background:#0b5e2a;color:white;border:none;cursor:pointer;border-radius:30px;}
button:hover{transform:scale(1.05);}
.logout{background:#f5b400;color:black;float:right;margin-top:-50px;padding:10px 20px;border:none;border-radius:30px;cursor:pointer;}
</style>
</head>
<body>

<header>
<h2>Admin Dashboard</h2>
<button class="logout" id="logoutBtn">Logout</button>
</header>

<div class="container">
<h3>Add News</h3>
<div class="card">
<input type="text" id="newsTitle" placeholder="News Title">
<button id="addNews">Add News</button>
</div>

<h3>Add Event</h3>
<div class="card">
<input type="text" id="eventTitle" placeholder="Event Title">
<button id="addEvent">Add Event</button>
</div>

<h3>Add Testimonial</h3>
<div class="card">
<input type="text" id="testimonialTitle" placeholder="Testimonial">
<button id="addTestimonial">Add Testimonial</button>
</div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-auth.js";
import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAD5Z3CXC8JvQVYhdxn5xbgLJ3WfIl_MZ4",
  authDomain: "leadscommunityschool-8570e.firebaseapp.com",
  projectId: "leadscommunityschool-8570e",
  storageBucket: "leadscommunityschool-8570e.appspot.com",
  messagingSenderId: "690085434671",
  appId: "1:690085434671:web:48bfbbac17928aad5f3dda"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

// Redirect if not logged in
onAuthStateChanged(auth, user=>{
  if(!user) window.location.href="login.html";
});

// Logout
document.getElementById("logoutBtn").addEventListener("click", ()=>{
  signOut(auth).then(()=>window.location.href="index.html");
});

// Add News
document.getElementById("addNews").addEventListener("click", async ()=>{
  const title = document.getElementById("newsTitle").value;
  if(title) await addDoc(collection(db,"news"),{title});
  document.getElementById("newsTitle").value="";
  alert("News added!");
});

// Add Event
document.getElementById("addEvent").addEventListener("click", async ()=>{
  const title = document.getElementById("eventTitle").value;
  if(title) await addDoc(collection(db,"events"),{title});
  document.getElementById("eventTitle").value="";
  alert("Event added!");
});

// Add Testimonial
document.getElementById("addTestimonial").addEventListener("click", async ()=>{
  const title = document.getElementById("testimonialTitle").value;
  if(title) await addDoc(collection(db,"testimonials"),{title});
  document.getElementById("testimonialTitle").value="";
  alert("Testimonial added!");
});
</script>

</body>
</html>
