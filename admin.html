<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Dashboard - Leads Community School</title>
<link rel="stylesheet" href="css/style.css">
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
section {max-width:600px;margin:20px auto;padding:20px;border:1px solid #ccc;border-radius:10px;}
input, textarea {width:100%;padding:10px;margin:10px 0;border-radius:5px;border:1px solid #ccc;}
button {padding:10px 20px;background:#083f1d;color:white;border:none;border-radius:5px;cursor:pointer;}
h2 {text-align:center;}
.logout {text-align:center;margin-top:20px;}
</style>
</head>
<body>

<header><h1 style="text-align:center;">Admin Dashboard</h1></header>

<section>
<h2>Add News</h2>
<form id="newsForm">
  <input type="text" id="newsTitle" placeholder="News Title" required>
  <button type="submit">Add News</button>
</form>
</section>

<section>
<h2>Add Event</h2>
<form id="eventForm">
  <input type="text" id="eventTitle" placeholder="Event Title" required>
  <button type="submit">Add Event</button>
</form>
</section>

<section>
<h2>Add Testimonial</h2>
<form id="testimonialForm">
  <input type="text" id="testimonialTitle" placeholder="Testimonial" required>
  <button type="submit">Add Testimonial</button>
</form>
</section>

<section>
<h2>Add Result</h2>
<form id="resultForm">
  <input type="text" id="studentName" placeholder="Student Name" required>
  <input type="text" id="resultText" placeholder="Result" required>
  <button type="submit">Add Result</button>
</form>
</section>

<div class="logout">
<button id="logoutBtn">Logout</button>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-app.js";
import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-auth.js";
import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAD5Z3CXC8JvQVYhdxn5xbgLJ3WfIl_MZ4",
  authDomain: "leadscommunityschool-8570e.firebaseapp.com",
  projectId: "leadscommunityschool-8570e",
  storageBucket: "leadscommunityschool-8570e.appspot.com",
  messagingSenderId: "690085434671",
  appId: "1:690085434671:web:48bfbbac17928aad5f3dda"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

const logoutBtn = document.getElementById('logoutBtn');

// Redirect if not logged in
onAuthStateChanged(auth, user => {
  if(!user){
    window.location.href = "login.html";
  }
});

// Logout
logoutBtn.addEventListener("click", ()=>signOut(auth).then(()=>window.location.href="index.html"));

// Add News
document.getElementById('newsForm').addEventListener('submit', async (e)=>{
  e.preventDefault();
  await addDoc(collection(db, "news"), {title: document.getElementById('newsTitle').value});
  e.target.reset();
  alert("News Added!");
});

// Add Event
document.getElementById('eventForm').addEventListener('submit', async (e)=>{
  e.preventDefault();
  await addDoc(collection(db, "events"), {title: document.getElementById('eventTitle').value});
  e.target.reset();
  alert("Event Added!");
});

// Add Testimonial
document.getElementById('testimonialForm').addEventListener('submit', async (e)=>{
  e.preventDefault();
  await addDoc(collection(db, "testimonials"), {title: document.getElementById('testimonialTitle').value});
  e.target.reset();
  alert("Testimonial Added!");
});

// Add Result
document.getElementById('resultForm').addEventListener('submit', async (e)=>{
  e.preventDefault();
  await addDoc(collection(db, "results"), {
    student: document.getElementById('studentName').value,
    result: document.getElementById('resultText').value
  });
  e.target.reset();
  alert("Result Added!");
});
</script>

</body>
</html>
