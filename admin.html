<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Dashboard - Leads Community School</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="css/style.css">
<style>
body {font-family:sans-serif;background:#f9f9f9;margin:0;padding:0;}
header {background:#083f1d;color:white;padding:15px;text-align:center;}
.container {max-width:900px;margin:20px auto;padding:20px;background:white;border-radius:10px;box-shadow:0 0 15px rgba(0,0,0,0.2);}
.container h2 {margin-bottom:20px;}
.container form {margin-bottom:30px;}
.container input, .container textarea, .container select {width:100%;padding:10px;margin:10px 0;border-radius:5px;border:1px solid #ccc;}
.container button {padding:10px 20px;background:#083f1d;color:white;border:none;border-radius:5px;cursor:pointer;}
.container button:hover {background:#056524;}
#logoutBtn {float:right;margin-top:-50px;background:#f5b400;color:black;}
</style>
</head>
<body>

<header>
<h1>Admin Dashboard</h1>
<button id="logoutBtn">Logout</button>
</header>

<div class="container">
<h2>Add News</h2>
<form id="newsForm">
<input type="text" id="newsTitle" placeholder="News Title" required>
<button type="submit">Add News</button>
</form>

<h2>Add Event</h2>
<form id="eventForm">
<input type="text" id="eventTitle" placeholder="Event Title" required>
<button type="submit">Add Event</button>
</form>

<h2>Add Testimonial</h2>
<form id="testimonialForm">
<input type="text" id="testimonialTitle" placeholder="Testimonial" required>
<button type="submit">Add Testimonial</button>
</form>

<h2>Add Student Result</h2>
<form id="resultForm">
<input type="text" id="studentName" placeholder="Student Name" required>
<input type="text" id="subject" placeholder="Subject" required>
<input type="text" id="score" placeholder="Score/Grade" required>
<button type="submit">Add Result</button>
</form>
</div>

<!-- FIREBASE AUTH + FIRESTORE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-auth.js";
import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAD5Z3CXC8JvQVYhdxn5xbgLJ3WfIl_MZ4",
  authDomain: "leadscommunityschool-8570e.firebaseapp.com",
  projectId: "leadscommunityschool-8570e",
  storageBucket: "leadscommunityschool-8570e.appspot.com",
  messagingSenderId: "690085434671",
  appId: "1:690085434671:web:48bfbbac17928aad5f3dda"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

const logoutBtn = document.getElementById("logoutBtn");

onAuthStateChanged(auth, user => {
  if(!user){
    window.location.href = "login.html";
  }
});

logoutBtn.addEventListener("click", () => {
  signOut(auth).then(()=> window.location.href="index.html");
});

// Add News
document.getElementById("newsForm").addEventListener("submit", async e => {
  e.preventDefault();
  const title = document.getElementById("newsTitle").value;
  await addDoc(collection(db,"news"), { title });
  alert("News added!");
  e.target.reset();
});

// Add Event
document.getElementById("eventForm").addEventListener("submit", async e => {
  e.preventDefault();
  const title = document.getElementById("eventTitle").value;
  await addDoc(collection(db,"events"), { title });
  alert("Event added!");
  e.target.reset();
});

// Add Testimonial
document.getElementById("testimonialForm").addEventListener("submit", async e => {
  e.preventDefault();
  const title = document.getElementById("testimonialTitle").value;
  await addDoc(collection(db,"testimonials"), { title });
  alert("Testimonial added!");
  e.target.reset();
});

// Add Result
document.getElementById("resultForm").addEventListener("submit", async e => {
  e.preventDefault();
  const name = document.getElementById("studentName").value;
  const subject = document.getElementById("subject").value;
  const score = document.getElementById("score").value;
  await addDoc(collection(db,"results"), { title:name, subject, score });
  alert("Result added!");
  e.target.reset();
});
</script>

</body>
</html>
